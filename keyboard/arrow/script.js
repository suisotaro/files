var e=document.createElement("style");e.innerText=`.drag-and-drop{top:10px;left:10px;cursor:move;position:absolute;z-index:1000}.drag{z-index:1001}`;document.getElementsByTagName("head")[0].appendChild(e);e=document.createElement("div");e.innerHTML='<p style="text-align:center;background:#f99;">ドラッグで動かせます</p><div class="simple-keyboard"></div>';e.className="drag-and-drop";document.body.appendChild(e);(function(){var f=document.getElementsByClassName("drag-and-drop");var a,g;for(var d=0;d<f.length;d++){f[d].addEventListener("mousedown",c,!1);f[d].addEventListener("touchstart",c,!1)}function c(i){this.classList.add("drag");if(i.type==="mousedown"){var h=i}else{var h=i.changedTouches[0]}a=h.pageX-this.offsetLeft;g=h.pageY-this.offsetTop;document.body.addEventListener("mousemove",e,!1);document.body.addEventListener("touchmove",e,!1)}function e(j){var h=document.getElementsByClassName("drag")[0];if(j.type==="mousemove"){var i=j}else{var i=j.changedTouches[0]}j.preventDefault();h.style.top=i.pageY-g+"px";h.style.left=i.pageX-a+"px";h.addEventListener("mouseup",b,!1);document.body.addEventListener("mouseleave",b,!1);h.addEventListener("touchend",b,!1);document.body.addEventListener("touchleave",b,!1)}function b(i){var h=document.getElementsByClassName("drag")[0];document.body.removeEventListener("mousemove",e,!1);h.removeEventListener("mouseup",b,!1);document.body.removeEventListener("touchmove",e,!1);h.removeEventListener("touchend",b,!1);h.classList.remove("drag")}})();e=document.createElement("link");e.rel="stylesheet";e.href='https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css';document.getElementsByTagName("head")[0].appendChild(e);e=document.createElement("script");e.src='https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.js';document.getElementsByTagName("head")[0].appendChild(e);e.onload=()=>{let Keyboard=window.SimpleKeyboard.default;let keyboard=new Keyboard({onChange:input=>onChange(input),onKeyPress:button=>onKeyPress(button),layout:{default:["ArrowUp","ArrowLeft ArrowDown ArrowRight","{space}"]},display:{"ArrowUp":"↑","ArrowLeft":"←","ArrowDown":"↓","ArrowRight":"→","{space}":"space",}});function onChange(input){} function onKeyPress(button){var key=button;if(button=="{space}")key=" ";console.log("Button pressed",button);document.dispatchEvent(new KeyboardEvent("keydown",{key:key}));setTimeout(()=>{console.log("Button up",button);document.dispatchEvent(new KeyboardEvent("keyup",{key:key}))},200);if(button==="{shift}"||button==="{lock}")handleShift()} function handleShift(){let currentLayout=keyboard.options.layoutName;let shiftToggle=currentLayout==="default"?"shift":"default";keyboard.setOptions({layoutName:shiftToggle})}}
